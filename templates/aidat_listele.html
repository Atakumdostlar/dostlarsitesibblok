<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Aidat Listesi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <div class="container mt-5">
    <h3 class="mb-4 text-center">ğŸ“‹ Aidat Listesi</h3>

<!-- Sayfa baÅŸÄ±: Ã¼st kÄ±sÄ±mda saÄŸa hizalanmÄ±ÅŸ -->
<div class="text-end mb-3">
  <a href="/panel" class="btn btn-secondary">â† Panele DÃ¶n</a>
</div>

<a href="/aidat12" class="btn btn-outline-warning mt-3">
  YÄ±llÄ±k Aidat Tablosu ğŸ“Š
</a>


    <!-- ğŸ” Filtreleme Formu -->
    <form method="get" action="/aidatlar" class="row row-cols-md-3 row-cols-lg-4 g-3 mb-4">

      <!-- ğŸ‘¤ Sakin SeÃ§imi -->
      <div>
        <label class="form-label">Sakin:</label>
        <select name="user_id" class="form-select">
          <option value="">TÃ¼mÃ¼</option>
          {% for user in sakinler %}
            <option value="{{ user.id }}" {% if user.id == selected_user %}selected{% endif %}>
              {{ user.etiket }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- ğŸ“† Tarih AralÄ±ÄŸÄ± -->
      <div>
        <label class="form-label">BaÅŸlangÄ±Ã§ Tarihi:</label>
        <input type="date" name="tarih1" class="form-control" value="{{ tarih1 }}">
      </div>
      <div>
        <label class="form-label">BitiÅŸ Tarihi:</label>
        <input type="date" name="tarih2" class="form-control" value="{{ tarih2 }}">
      </div>

      <!-- ğŸ”¢ SÄ±ralama -->
      <div>
        <label class="form-label">SÄ±ralama:</label>
        <select name="siralama" class="form-select">
          <option value="tarih" {% if siralama == 'tarih' %}selected{% endif %}>Tarih</option>
          <option value="tutar" {% if siralama == 'tutar' %}selected{% endif %}>Tutar</option>
          <option value="durum" {% if siralama == 'durum' %}selected{% endif %}>Durum</option>
          <option value="ad_soyad" {% if siralama == 'ad_soyad' %}selected{% endif %}>Ad Soyad</option>
          <option value="daire_no" {% if siralama == 'daire_no' %}selected{% endif %}>Daire No</option>
        </select>
      </div>

      <!-- â†•ï¸ YÃ¶n -->
      <div>
        <label class="form-label">YÃ¶n:</label>
        <select name="yon" class="form-select">
          <option value="ASC" {% if yon == 'ASC' %}selected{% endif %}>Artan</option>
          <option value="DESC" {% if yon == 'DESC' %}selected{% endif %}>Azalan</option>
        </select>
      </div>

      <!-- ğŸ”˜ Buton -->
      <div class="d-flex align-items-end">
        <button type="submit" class="btn btn-dark w-100">Filtrele</button>
      </div>
    </form>

  



    <!-- ğŸ—‚ï¸ Aidat Tablosu -->
    <table class="table table-bordered table-striped">
      <thead class="table-dark text-center">
        <tr>
          <th>Daire No</th>
          <th>Ad Soyad</th>
          <th>Tarih</th>
          <th>DÃ¶nem</th>
          <th>Tutar (â‚º)</th>
          <th>Durum</th>
          <th>AÃ§Ä±klama</th>
          <th>Ä°ÅŸlem</th>
        </tr>
      </thead>
      <tbody>
        {% for aidat_id, daire, ad, tarih, tutar, durum, yil, ay, aciklama in kayitlar %}
        <tr>
          <td>{{ daire }}</td>
          <td>{{ ad }}</td>
          <td>{{ tarih }}</td>
          <td>{{ yil }}/{{ '%02d'|format(ay or 0) }}</td>
          <td>â‚º {{ "{:,}".format(tutar | int).replace(",", ".") }}</td>
         <td>
  {% if durum == 'odendi' %}
    <span class="badge bg-success">âœ… Ã–dendi</span>
  {% elif durum == 'kismi' %}
    <span class="badge bg-warning text-dark">ğŸŸ¡ KÄ±smi</span>
  {% else %}
    <span class="badge bg-danger">âŒ Beklemede</span>
  {% endif %}
</td>

  <td>{{ aciklama or "-" }}</td>
  <td class="text-center">
    {% if aidat_id %}
      <a href="/aidat-duzenle/{{ aidat_id }}" class="btn btn-sm btn-warning">âœï¸</a>
      <a href="/aidat-sil/{{ aidat_id }}" class="btn btn-sm btn-danger"
         onclick="return confirm('Emin misin?')">ğŸ—‘ï¸</a>
    {% else %}
      <span class="text-muted">No ID</span>
    {% endif %}
  </td>

        </tr>
        {% else %}
        <tr>
          <td colspan="8" class="text-center text-muted">KayÄ±t bulunamadÄ±</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="text-center mt-4">
      <a href="/panel" class="btn btn-secondary">â† Panele DÃ¶n</a>
    </div>
  </div>

</body>
</html>
